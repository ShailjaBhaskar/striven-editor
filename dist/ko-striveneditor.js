/*! For license information please see ko-striveneditor.js.LICENSE */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.striveneditor=e():t.striveneditor=e()}(window,(function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}({0:function(t,e,o){var n,i,a;i=[e],void 0===(a="function"==typeof(n=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;
/*
  @license/i
  * Font Awesome Free 5.11.2 by @fontawesome - https://fontawesome.com
  * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
  */
var i=[".doc",".docx",".xls",".xlsx",".ppt",".pptx",".pdf",".tif",".jpeg",".jpg",".gif",".bmp",".txt",".csv",".png",".msg",".wav",".mp3",".mp4",".zip",".rtf",".eps",".ai",".psd",".avi",".mov",".wmv",".cfg",".wss",".vsd",".vsdx",".tsd",".lic"],a="fas",r={textDecoration:{menu:{viewBox:"0 0 1792 1792",d:"M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5 13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"},group:[{bold:{viewBox:"0 0 1792 1792",d:"M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68 .5t68 .5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z"}},{italic:{viewBox:"0 0 1792 1792",d:"M384 1662l17-85q22-7 61.5-16.5t72-19 59.5-23.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z"}},{underline:{viewBox:"0 0 1792 1792",d:"M176 223q-37-2-45-4l-3-88q13-1 40-1 60 0 112 4 132 7 166 7 86 0 168-3 116-4 146-5 56 0 86-2l-1 14 2 64v9q-60 9-124 9-60 0-79 25-13 14-13 132 0 13 .5 32.5t.5 25.5l1 229 14 280q6 124 51 202 35 59 96 92 88 47 177 47 104 0 191-28 56-18 99-51 48-36 65-64 36-56 53-114 21-73 21-229 0-79-3.5-128t-11-122.5-13.5-159.5l-4-59q-5-67-24-88-34-35-77-34l-100 2-14-3 2-86h84l205 10q76 3 196-10l18 2q6 38 6 51 0 7-4 31-45 12-84 13-73 11-79 17-15 15-15 41 0 7 1.5 27t1.5 31q8 19 22 396 6 195-15 304-15 76-41 122-38 65-112 123-75 57-182 89-109 33-255 33-167 0-284-46-119-47-179-122-61-76-83-195-16-80-16-237v-333q0-188-17-213-25-36-147-39zm1488 1409v-64q0-14-9-23t-23-9h-1472q-14 0-23 9t-9 23v64q0 14 9 23t23 9h1472q14 0 23-9t9-23z"}},{strikethrough:{viewBox:"0 0 1792 1792",d:"M1760 896q14 0 23 9t9 23v64q0 14-9 23t-23 9h-1728q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h1728zm-1277-64q-28-35-51-80-48-98-48-188 0-181 134-309 133-127 393-127 50 0 167 19 66 12 177 48 10 38 21 118 14 123 14 183 0 18-5 45l-12 3-84-6-14-2q-50-149-103-205-88-91-210-91-114 0-182 59-67 58-67 146 0 73 66 140t279 129q69 20 173 66 58 28 95 52h-743zm507 256h411q7 39 7 92 0 111-41 212-23 56-71 104-37 35-109 81-80 48-153 66-80 21-203 21-114 0-195-23l-140-40q-57-16-72-28-8-8-8-22v-13q0-108-2-156-1-30 0-68l2-37v-44l102-2q15 34 30 71t22.5 56 12.5 27q35 57 80 94 43 36 105 57 59 22 132 22 64 0 139-27 77-26 122-86 47-61 47-129 0-84-81-157-34-29-137-71z"}},{removeFormat:{viewBox:"0 0 640 512",d:"M336 416h-11.17l9.26-27.77L267 336.4 240.49 416H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm297.82 42.1L377 259.59 426.17 112H544v32a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16H176a16 16 0 0 0-16 16v43.9L45.46 3.38A16 16 0 0 0 23 6.19L3.37 31.46a16 16 0 0 0 2.81 22.45l588.36 454.72a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zM309.91 207.76L224 141.36V112h117.83z"}}]},listOptions:{menu:{viewBox:"0 0 1792 1792",d:"M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"},group:[{insertOrderedList:{viewBox:"0 0 1792 1792",d:"M381 1620q0 80-54.5 126t-135.5 46q-106 0-172-66l57-88q49 45 106 45 29 0 50.5-14.5t21.5-42.5q0-64-105-56l-26-56q8-10 32.5-43.5t42.5-54 37-38.5v-1q-16 0-48.5 1t-48.5 1v53h-106v-152h333v88l-95 115q51 12 81 49t30 88zm2-627v159h-362q-6-36-6-54 0-51 23.5-93t56.5-68 66-47.5 56.5-43.5 23.5-45q0-25-14.5-38.5t-39.5-13.5q-46 0-81 58l-85-59q24-51 71.5-79.5t105.5-28.5q73 0 123 41.5t50 112.5q0 50-34 91.5t-75 64.5-75.5 50.5-35.5 52.5h127v-60h105zm1409 319v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm-1408-899v99h-335v-99h107q0-41 .5-121.5t.5-121.5v-12h-2q-8 17-50 54l-71-76 136-127h106v404h108zm1408 387v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"}},{insertUnorderedList:{viewBox:"0 0 1792 1792",d:"M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm-1408-928q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5"}}]},textAlign:{menu:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45z"},group:[{indent:{viewBox:"0 0 1792 1792",d:"M352 832q0 14-9 23l-288 288q-9 9-23 9-13 0-22.5-9.5t-9.5-22.5v-576q0-13 9.5-22.5t22.5-9.5q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"}},{justifyLeft:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"}},{justifyCenter:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z"}},{justifyRight:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"}}]},attachments:{menu:{viewBox:"0 0 1792 1792",d:"M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"},group:[{attachment:{viewBox:"0 0 1792 1792",d:"M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"}},{link:{viewBox:"0 0 1792 1792",d:"M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"}},{image:{viewBox:"0 0 2048 1792",d:"M704 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448h-1408v-192l320-320 160 160 512-512zm96-704h-1600q-13 0-22.5 9.5t-9.5 22.5v1216q0 13 9.5 22.5t22.5 9.5h1600q13 0 22.5-9.5t9.5-22.5v-1216q0-13-9.5-22.5t-22.5-9.5zm160 32v1216q0 66-47 113t-113 47h-1600q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1600q66 0 113 47t47 113z"}}]}},l=["bold","italic","underline","strikethrough","removeFormat","insertOrderedList","insertUnorderedList","indent","justifyLeft","justifyCenter","justifyRight","attachment","link","image"],s="#777777",c=function(){function t(e,o){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.establishBrowser(),this.range=new Range,this.files=[],this.optionGroups=r,o?(this.options=o,o.fontPack||(this.options.fontPack=a),o.extensions||(this.options.extensions=i),o.toolbarOptions||(this.options.toolbarOptions=l),o.activeOptionColor||(this.options.activeOptionColor=s)):this.options={fontPack:a,extensions:i,toolbarOptions:l,activeOptionColor:s},this.initEditor(e),this.initResponsive(),this.initOverflow(),e.StrivenEditor=function(){return n},this.bound_popupEscapeHandler=this.popupEscapeHandler.bind(this)}var c,u,d;return c=t,(u=[{key:"initEditor",value:function(t){var e=this;if(this.editor=t,this.toolbar=this.initToolbar(),this.body=this.initBody(),this.linkMenu=this.initLinkMenu(),this.imageMenu=this.initImageMenu(),this.metaDataSection=this.initMetaDataSection(),this.filesSection=this.initFilesSection(),this.editor.classList.add("editor","Striven-Editor"),this.options.toolbarHide){this.customToolbarButton&&(this.customToolbarButton.style.display="none"),this.toolbarOptionsGroup.style.display="none";var n=this.body.onfocus;this.body.onfocus=function(){n&&n(),e.overflow(),e.toolbarSlideUp()};var i=this.body.onblur;this.body.onblur=function(){i&&i(),e.overflow(),setTimeout((function(){"true"===e.linkMenu.dataset.active||"true"===e.imageMenu.dataset.active||e.isEditorInFocus()||e.toolbarSlideDown()}),500)}}this.toolbarOptions.forEach((function(t){t.style.cursor="pointer",t.style.userSelect="none";var n=t.onclick;t.onclick=function(i){var a=function(){var t=e.body.querySelectorAll("blockquote");o(t).forEach((function(t){return t.style.margin="0 0 0 40px"}))};e.body.focus(),window.getSelection().removeAllRanges(),window.getSelection().addRange(e.range);var r=t.id.split("-")[1];switch(r){case"insertOrderedList":e.isFirefox?(document.execCommand("indent"),document.execCommand(r),a()):e.isEdge?(document.execCommand(r),o(document.querySelectorAll("ol")).forEach((function(t){return t.style.marginLeft="40px"}))):(document.execCommand("indent",!0),document.execCommand(r,!0));break;case"insertUnorderedList":e.isFirefox?(document.execCommand("indent"),document.execCommand(r),a()):e.isEdge?(document.execCommand(r),o(document.querySelectorAll("ul")).forEach((function(t){return t.style.marginLeft="40px"}))):(document.execCommand("indent",!0),document.execCommand(r,!0));break;case"attachment":var l=document.createElement("input");l.style.display="none",l.type="file",l.onchange=function(t){return e.attachFile(l.files[0])},l.click();break;case"link":"true"===e.linkMenu.dataset.active?e.closeLinkMenu():(e.linkMenuSlideIn(),e.linkMenu.querySelector("input").focus());break;case"image":"true"===e.imageMenu.dataset.active?e.closeImageMenu():(e.imageMenuSlideIn(),e.range=e.getRange(),e.imageMenu.querySelector("input").focus());break;default:e.isFirefox||e.isEdge?(document.execCommand(r),"indent"===r&&a()):document.execCommand(r,!0),e.toolbarState()}n&&n()}})),this.editor.appendChild(this.toolbar),this.editor.appendChild(this.body),this.editor.appendChild(this.linkMenu),this.editor.appendChild(this.imageMenu),this.editor.appendChild(this.metaDataSection),this.editor.appendChild(this.filesSection),this.options.toolbarBottom&&(this.editor.removeChild(this.toolbar),this.editor.append(this.toolbar))}},{key:"imageMenuSlideIn",value:function(){var t=this;this.openImageMenu();var e=0,o=this.editor.offsetWidth/4,n=setInterval((function(){o<=10?(clearInterval(n),t.imageMenu.style.opacity=1):(o-=2.5,e+=.01,t.imageMenu.style.opacity="".concat(e),t.imageMenu.style.right="".concat(o,"px"))}),5);this.imageMenu.style.opacity=e}},{key:"linkMenuSlideIn",value:function(){var t=this;this.openLinkMenu();var e=0,o=this.editor.offsetWidth/4,n=setInterval((function(){o<=10?(clearInterval(n),t.linkMenu.style.opacity=1):(o-=2.5,e+=.01,t.linkMenu.style.opacity="".concat(e),t.linkMenu.style.right="".concat(o,"px"))}),5);this.linkMenu.style.opacity=e}},{key:"toolbarSlideUp",value:function(){var t=this,e=this.toolbar.offsetHeight,o=setInterval((function(){e>=40?(t.customToolbarButton&&(t.customToolbarButton.style.display="flex"),t.toolbarOptionsGroup.style.display="flex",clearInterval(o)):(e++,t.toolbar.style.minHeight="".concat(e,"px"))}),5)}},{key:"toolbarSlideDown",value:function(){var t=this;this.customToolbarButton&&(this.customToolbarButton.style.display="none"),this.toolbarOptionsGroup.style.display="none";var e=40,o=setInterval((function(){0===e?clearInterval(o):(e--,t.toolbar.style.minHeight="".concat(e,"px"))}),5)}},{key:"initToolbar",value:function(){var t=this,n=document.createElement("div");this.toolbarOptionsGroup=document.createElement("div");var i=Object.keys(this.optionGroups);n.classList.add("toolbar"),n.style.minHeight=this.options.toolbarHide?"0":"40px",this.toolbarOptionsGroup.classList.add("toolbar-options"),this.toolbarOptionsGroup.style.display=this.options.toolbarHide?"none":"flex",n.onclick=function(){return t.body.focus()},i.forEach((function(e){var o=document.createElement("div");o.classList.add("toolbar-menu"),o.id="menu-".concat(e),o.appendChild(t.constructSVG(t.optionGroups[e].menu)),t.toolbarOptionsGroup.appendChild(o);var n=document.createElement("div");n.classList.add("toolbar-group"),n.id="group-".concat(e),t.options.toolbarOptions.forEach((function(o){var i=t.optionGroups[e].group.filter((function(t){return t[o]}))[0];if(i){var a=i[o],r=t.constructSVG(a);r.classList.add("toolbar-option"),r.id="toolbar-".concat(o),n.appendChild(r)}})),t.toolbarOptionsGroup.appendChild(n)}));var a=this.options.toolbarOptions.filter((function(t){return"object"===e(t)}));if(a.length>0&&(this.customToolbarMenu=document.createElement("div"),this.customToolbarMenu.classList.add("toolbar-menu"),this.customToolbarMenu.id="menu-custom",this.customToolbarMenu.appendChild(this.constructSVG({viewBox:"0 0 1792 1792",d:"M1088 1248v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68z"})),this.toolbarOptionsGroup.appendChild(this.customToolbarMenu),this.customToolbarGroup=document.createElement("div"),this.customToolbarGroup.classList.add("toolbar-group"),this.customToolbarGroup.id="group-custom",a.forEach((function(e){var o=e.icon,n=e.handler,i=t.constructSVG(o);i.id="toolbar-customOption",i.style.margin="0 10px",i.onclick=function(){return n()},t.customToolbarGroup.appendChild(i)})),this.toolbarOptionsGroup.appendChild(this.customToolbarGroup)),n.appendChild(this.toolbarOptionsGroup),this.options.customToolbarButton){var r=document.createElement("div");r.id="custom-toolbar-button",r.classList.add("custom-toolbar-button"),r.style.minHeight=this.options.toolbarHide?"40px":n.style.minHeight,r.onclick=function(){return t.options.customToolbarButton.handler()},!this.options.toolbarHide&&(r.style.display="flex"),r.onmouseenter=function(){r.style.borderColor=t.options.customToolbarButton.hoverBorderColor,r.style.backgroundColor=t.options.customToolbarButton.hoverBackgroundColor,r.style.color=t.options.customToolbarButton.hoverColor},r.onmouseleave=function(){r.style.borderColor=t.options.customToolbarButton.borderColor,r.style.backgroundColor=t.options.customToolbarButton.backgroundColor,r.style.color=t.options.customToolbarButton.color};var l=this.constructSVG(this.options.customToolbarButton.svgData);l.querySelector("path").setAttribute("fill",this.options.customToolbarButton.color),r.appendChild(l),n.appendChild(r)}return this.toolbarOptions=n.querySelectorAll("span"),this.toolbarGroups=o(n.getElementsByClassName("toolbar-group")),this.toolbarMenus=o(n.getElementsByClassName("toolbar-menu")),this.customToolbarButton=n.querySelector("#custom-toolbar-button"),this.toolbarMenus.push(this.customToolbarMenu),this.toolbarGroups.push(this.customToolbarGroup),this.toolbarGroups.forEach((function(e){if(e&&e.children.length<1){var o=e.id.split("-")[1];t.toolbarMenus.filter((function(t){return t.id.split("-")[1]===o}))[0].remove()}})),n}},{key:"initBody",value:function(){var t=this,e=document.createElement("div");if(e.classList.add("body"),e.contentEditable="true",e.style.height=this.editor.style.height,e.style.minHeight=this.editor.style.minHeight,e.style.maxHeight=this.editor.style.maxHeight,this.editor.style.height="auto",this.editor.style.minHeight="auto",this.editor.style.maxHeight="auto",this.options.placeholder){var o=document.createElement("p");o.id="placeholder-node",o.style.color="#5f6368",o.style.margin="0",o.textContent=this.options.placeholder,e.append(o);var n=e.onfocus;e.onfocus=function(){n&&n(),e.querySelector("#placeholder-node")===o&&t.clearContent()};var i=e.onblur;e.onblur=function(){i&&i(),""===t.getContent().trim()&&e.append(o)}}e.onpaste=function(e){var o;if(e.clipboardData.files.length>0&&e.clipboardData.files[0].type.includes("image")&&(o=e.clipboardData.files[0],new Promise((function(t,e){var n=new FileReader;n.readAsDataURL(o),n.onload=function(){return t(n.result)},n.onerror=function(t){return e(t)}}))).then((function(e){t.options.imageUrl?t.getImage(e).then((function(t){document.execCommand("insertImage",!0,t.imageRef)})).catch((function(t){document.execCommand("insertImage",!0,e)})):(document.execCommand("insertImage",!0,e),t.options.uploadOnPaste&&t.attachFile(function(t,e){for(var o=t.split(","),n=o[0].match(/:(.*?);/)[1],i=atob(o[1]),a=i.length,r=new Uint8Array(a);a--;)r[a]=i.charCodeAt(a);var l=new File([r],e,{type:n});return new File([r],"".concat(l.name,".").concat(l.type.split("/").pop()),{type:l.type})}(e,"pastedimage"))),t.overflow()})),t.options.sanitizePaste&&e.clipboardData.types.includes("text/html")){var n;e.preventDefault();for(var i=0;i<e.clipboardData.items.length;i++){var a=e.clipboardData.items[i];"text/html"===a.type&&(n=a)}n&&n.getAsString((function(e){var o=t.getRange();o.insertNode(t.scrubHTML(e)),o.collapse()}))}e.clipboardData.items.length>0&&"text/plain"===e.clipboardData.items[0].type&&e.clipboardData.items[0].getAsString((function(e){t.options.metaUrl&&t.validURL(e)&&t.getMeta(e).then((function(e){var o=e.url,n=e.title,i=e.image,a=e.description;o&&n&&i&&t.createMetaDataElement(o,i,n,a)}))})),t.overflow()};var a=e.onkeyup;e.onkeyup=function(o){if(a&&a(),t.range=t.getRange(),t.options.submitOnEnter&&13===o.keyCode&&!o.shiftKey&&!document.queryCommandState("insertOrderedList")&&!document.queryCommandState("insertUnorderedList")){var n=!!t.getTextContent(),i=!!e.querySelector("img");if(n||i){var r=e.querySelectorAll("div"),l=r[r.length?r.length-1:0];l&&l.remove()}var s=t.getContent(),c=t.getFiles();t.clearContent(),t.clearFiles(),(c.length||n||i)&&t.options.submitOnEnter({content:(n||i)&&s,files:c})}t.toolbarState()};var r=e.onmouseup;return e.onmouseup=function(e){r&&r(),t.range=t.getRange()},e}},{key:"initLinkMenu",value:function(){var t=this,e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("button"),r=document.createElement("button"),l=document.createElement("p"),s=document.createElement("input");return e.id="link-menu",e.classList.add("popup"),e.dataset.active="false",n.classList.add("popup-form"),l.classList.add("form-label"),l.textContent="Web Address",s.classList.add("form-input"),s.type="text",s.placeholder="Insert a Link",i.classList.add("popup-button-container"),a.classList.add("popup-button"),a.classList.add("button-primary"),a.textContent="Insert Link",r.classList.add("popup-button"),r.classList.add("button-secondary"),r.textContent="Close",a.onclick=function(e){var n=s.value;n?(window.getSelection().removeAllRanges(),window.getSelection().addRange(t.range),t.isFirefox||t.isEdge?document.execCommand("createLink",!1,n):document.execCommand("createLink",!0,n),t.options.metaUrl&&t.validURL(n)&&t.getMeta(n).then((function(e){var o=e.url,n=e.image,i=e.title,a=e.description;o&&n&&i&&t.createMetaDataElement(o,n,i,a)})),o(t.body.querySelectorAll("a")).forEach((function(e){return!t.isFirefox&&(e.contentEditable="false")})),s.value="",t.closeLinkMenu()):(t.body.focus(),t.closeLinkMenu())},r.onclick=function(e){t.body.focus(),t.closeLinkMenu()},n.appendChild(l),n.appendChild(s),e.appendChild(n),i.appendChild(a),i.appendChild(r),e.appendChild(i),e}},{key:"initImageMenu",value:function(){var t=this,e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("button"),r=document.createElement("button"),l=document.createElement("p"),s=document.createElement("input");e.id="image-menu",e.classList.add("popup"),e.dataset.active="false",n.classList.add("popup-form"),l.classList.add("form-label"),l.textContent="Image URL",s.classList.add("form-input"),s.type="text",s.placeholder="Insert a Link",i.classList.add("popup-button-container"),a.classList.add("popup-button"),a.classList.add("button-primary"),a.textContent="Insert Image",r.classList.add("popup-button"),r.classList.add("button-secondary"),r.textContent="Close",n.appendChild(l),n.appendChild(s);var c=n.cloneNode(!0),u=c.querySelector("input"),d=c.querySelector("p");u.placeholder="Image Height",d.textContent="Height";var p=n.cloneNode(!0),h=p.querySelector("input"),m=p.querySelector("p");return h.placeholder="Image Width",m.textContent="Width",a.onclick=function(e){var n=s.value,i=u.value,a=h.value;if(n){window.getSelection().removeAllRanges(),window.getSelection().addRange(t.range),t.isFirefox||t.isEdge?document.execCommand("insertImage",!1,n):document.execCommand("insertImage",!0,n);var r=o(t.body.querySelectorAll("img")).filter((function(t){return t.src===n}));(r=r[r.length-1])&&(r.style.height="".concat(i,"px")),r&&(r.style.width="".concat(a,"px")),u.value="",h.value="",s.value="",t.closeImageMenu()}else t.body.focus(),t.closeImageMenu()},r.onclick=function(e){t.body.focus(),t.closeImageMenu()},e.appendChild(c),e.appendChild(p),e.appendChild(n),i.appendChild(a),i.appendChild(r),e.appendChild(i),e}},{key:"initMetaDataSection",value:function(){var t=document.createElement("div");return t.classList.add("metadata-section"),t}},{key:"initFilesSection",value:function(){var t=this,e=document.createElement("div");return e.classList.add("files-section"),this.body.ondragenter=function(e){t.body.style.backgroundColor="#ddd"},this.body.ondragleave=function(e){t.body.style.backgroundColor="inherit"},this.body.ondrop=function(e){t.body.style.backgroundColor="inherit",e.preventDefault();var o=e.dataTransfer.files&&e.dataTransfer.files[0];t.attachFile(o)},this.isEdge&&(this.body.ondragover=function(t){return t.preventDefault()}),e}},{key:"createFileElement",value:function(t,e){var o=this,n=document.createElement("div"),i=document.createElement("h4"),a=document.createElement("p"),r=document.createElement("p");i.textContent=t,a.textContent=e,r.textContent="X",n.classList.add("file-el"),n.dataset.fileindex=this.files.length-1,i.classList.add("file-name-el"),a.classList.add("file-size-el"),r.classList.add("remove-file-el"),r.onmouseenter=function(){return r.style.color="#ddd"},r.onmouseleave=function(){return r.style.color="black"},r.onclick=function(t){o.files.splice(t.target.parentElement.dataset.fileindex,1),t.target.parentElement.remove()},n.appendChild(i),n.appendChild(a),n.appendChild(r),this.filesSection.appendChild(n)}},{key:"createMetaDataElement",value:function(t,e,o,n){var i=document.createElement("div"),a=document.createElement("a"),r=document.createElement("img"),l=document.createElement("div"),s=document.createElement("h4"),c=document.createElement("p"),u=document.createElement("span");a.href=t,r.src=e,s.textContent=o,c.textContent=n,u.textContent="X",a.target="blank",i.classList.add("meta-item-el"),r.classList.add("meta-image-el"),s.classList.add("meta-data-title-el"),c.style.margin="0",u.classList.add("remove-meta-data-el"),u.onmouseenter=function(){return u.style.color="#ddd"},u.onmouseleave=function(){return u.style.color="black"},u.onclick=function(t){return t.target.parentElement.remove()},a.appendChild(r),l.appendChild(s),l.appendChild(c),i.appendChild(a),i.appendChild(l),i.appendChild(u),this.metaDataSection.appendChild(i)}},{key:"constructSVG",value:function(t){var e=t.viewBox,o=t.d,n=this.options.toolbarOptionFillColor?this.options.toolbarOptionFillColor:"#333",i=document.createElement("span"),a='<svg width="'.concat("16",'" height="').concat("14",'" viewBox="').concat(e,'" xmlns="').concat("http://www.w3.org/2000/svg",'">'),r='<path fill="'.concat(n,'" d="').concat(o,'"/>');return i.innerHTML="".concat(a).concat(r,"</svg>"),i}},{key:"initResponsive",value:function(){var t=this,e=this;if(this.options.minimal)this.toolbarMenus.forEach((function(t){return t&&(t.style.display="none")})),this.toolbar.querySelector("#toolbar-strikethrough").style.display="none",this.toolbar.querySelector("#toolbar-image").style.display="none",this.toolbar.querySelector("#toolbar-insertOrderedList").style.display="none",this.toolbar.querySelector("#group-textAlign").style.display="none",this.toolbar.querySelector("#toolbar-removeFormat").style.display="none";else{var o=function(t){e.toolbarGroups.forEach((function(o){o&&(o.dataset.open="false",o.style.display=t?"none":"block",o.style.position=t?"absolute":"relative",!e.options.toolbarBottom&&(o.style.top=t?"50px":"inherit"),e.options.toolbarBottom&&(o.style.bottom=t?"50px":"inherit"))})),e.toolbarMenus.forEach((function(o){o&&(o.style.padding="0 10px",o.style.cursor="pointer",o.style.userSelect="none",o.style.display=t?"block":"none",o.onclick=function(t){var n;"false"===(n=e.toolbar.querySelector("#group-".concat(o.id.split("-")[1]))).dataset.open?(e.toolbarGroups.forEach((function(t){t&&"true"===t.dataset.open&&(t.style.display="none",t.dataset.open="false")})),n.style.display="block",n.style.padding="5px 5px 0 5px",n.dataset.open="true"):(n.style.display="none",n.dataset.open="false"),e.body.focus()})}))},n=function(){i=window.matchMedia("(max-width: 700px)").matches,o(i)},i=window.matchMedia("(max-width: 700px)").matches;n(),window.onresize=function(){t.toolbarGroups.forEach((function(t){return t&&(t.style.padding="0")})),t.closeLinkMenu(),t.closeImageMenu(),n()}}}},{key:"initOverflow",value:function(){var t=this,e=this.body.onfocus;this.body.onfocus=function(){e&&e(),t.overflow()};var o=this.body.onblur;this.body.onblur=function(){o&&o(),t.overflow()};var n=this.body.onkeypress;this.body.onkeypress=function(){n&&n(),t.overflow()}}},{key:"getFiles",value:function(){return this.files}},{key:"getContent",value:function(){return this.body.querySelector("#placeholder-node")?"":this.body.innerHTML}},{key:"getRange",value:function(){return window.getSelection().getRangeAt(0)}},{key:"getMeta",value:function(t){return fetch(this.options.metaUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUrl:t})}).then((function(t){return t.json()}))}},{key:"getImage",value:function(t){return fetch(this.options.imageUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageEncoding:t})}).then((function(t){return t.json()}))}},{key:"validURL",value:function(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}},{key:"overflow",value:function(){var t=this.body;t.scrollHeight>t.clientHeight?t.style.overflowY="scroll":t.style.overflowY="hidden",t.scrollWidth>t.clientWidth?t.style.overflowX="scroll":t.style.overflowX="hidden"}},{key:"formatBytes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var o=1024,n=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,a)).toFixed(n))+" "+i[a]}},{key:"validateFile",value:function(t){var e=t.type.split("/").pop();return this.options.extensions.includes(".".concat(e))}},{key:"attachFile",value:function(t){this.validateFile(t)?(this.files.push(t),this.createFileElement(t.name,this.formatBytes(t.size))):this.fileInvalid()}},{key:"fileInvalid",value:function(){var t=this;this.body.style.transition="background-color .5s",this.body.style.backgroundColor="#d9534f",setTimeout((function(){t.body.style.backgroundColor="inherit",setTimeout((function(){return t.body.style.transition="none"}),500)}),2e3)}},{key:"openLinkMenu",value:function(){this.closeImageMenu(),this.linkMenu.dataset.active="true",this.linkMenu.style.display="block",this.addPopupEscapeHandler()}},{key:"openImageMenu",value:function(){this.closeLinkMenu(),this.imageMenu.dataset.active="true",this.imageMenu.style.display="block",this.addPopupEscapeHandler()}},{key:"closeLinkMenu",value:function(){this.linkMenu.dataset.active="false",this.linkMenu.style.display="none",this.removePopupEscapeHandler()}},{key:"closeImageMenu",value:function(){this.imageMenu.dataset.active="false",this.imageMenu.style.display="none",this.removePopupEscapeHandler()}},{key:"popupEscapeHandler",value:function(t){27===t.which&&(this.closeImageMenu(),this.closeLinkMenu())}},{key:"addPopupEscapeHandler",value:function(){this.removePopupEscapeHandler(),this.editor.addEventListener("keyup",this.bound_popupEscapeHandler)}},{key:"removePopupEscapeHandler",value:function(){this.editor.removeEventListener("keyup",this.bound_popupEscapeHandler)}},{key:"setContent",value:function(t){this.clearContent(),this.body.innerHTML=t}},{key:"clearContent",value:function(){this.body.innerHTML=""}},{key:"clearFiles",value:function(){this.files=[],this.filesSection.innerHTML=""}},{key:"getTextContent",value:function(){return this.body.querySelector("#placeholder-node")?"":this.body.textContent}},{key:"scrubHTML",value:function(t){var e=document.createElement("div"),o=document.createElement("div");return e.innerHTML=t,o.append(document.createTextNode(e.textContent)),o}},{key:"toolbarState",value:function(){var t=this;this.options.toolbarOptions.forEach((function(e){var o=t.toolbar.querySelector("#toolbar-".concat(e));e.includes("justify")||e.includes("list")||(document.queryCommandState(e)?o.querySelector("path").setAttribute("fill",t.options.activeOptionColor):o.querySelector("path").setAttribute("fill","#333"))}))}},{key:"establishBrowser",value:function(){this.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,this.isFirefox="undefined"!=typeof InstallTrigger,this.isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),this.isIE=!!document.documentMode,this.isEdge=!this.isIE&&!!window.StyleMedia,this.isChrome=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),this.isBlink=(this.isChrome||this.isOpera)&&!!window.CSS}},{key:"isEditorInFocus",value:function(){var t=this;return function e(o){return o===t.editor||o!==document.body&&o.parentNode&&e(o.parentNode)}(document.activeElement)}}])&&n(c.prototype,u),d&&n(c,d),t}();t.default=c})?n.apply(e,i):n)||(t.exports=a)},5:function(t,e,o){var n,i,a;i=[e,o(0)],void 0===(a="function"==typeof(n=function(t,e){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=(o=e)&&o.__esModule?o:{default:o},t.default=function t(o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.bindingHandlers.striveneditor={init:function(t,n,i,a,r){var l=n(),s=o.utils.unwrapObservable(l);new e.default(s)}}}})?n.apply(e,i):n)||(t.exports=a)}})}));